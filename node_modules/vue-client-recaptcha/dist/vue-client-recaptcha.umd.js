/*
 * vue-client-recaptcha
 * Creator:parsajiravand
 * Build simple recaptcha for vuejs without need server
 * v1.1.5
 * MIT License
 */

(function(t,c){typeof exports=="object"&&typeof module!="undefined"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(t=typeof globalThis!="undefined"?globalThis:t||self,t.VueClientRecaptcha=c(t.Vue))})(this,function(t){"use strict";var c="";return t.defineComponent({props:{value:{default:""},chars:{default:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},count:{default:5},hideLines:{type:Boolean,default:!1},customTextColor:{default:""},textColors:{default:()=>[]},isDirty:{type:Boolean,default:!0},width:{default:function(h){return h.count*30}},height:{default:50},canvasClass:{default:""},icon:{default:"refresh"},captchaFont:{default:"bold 28px sans-serif"},hideRefreshIcon:{type:Boolean,default:!1}},emits:["isValid","getCode"],setup(h,{expose:C,emit:i}){const a=h,f=t.useSlots(),o=t.ref();let n=t.ref(""),s=a.width,r=a.height;t.onMounted(()=>{u()});const u=()=>{o.value.width=s,o.value.height=r;let e=o.value.getContext("2d");for(let l=0;l<a.count;l++){let d=Math.floor(Math.random()*a.chars.length),x=Math.random()*30*Math.PI/180,_=a.chars[d];n.value+=_;let m=10+l*25,g=30+Math.random()*8;e.font=a.captchaFont,e.translate(m,g),a.customTextColor?e.fillStyle=a.customTextColor:a.textColors.length?e.fillStyle=a.textColors[Math.floor(Math.random()*a.textColors.length)]:e.fillStyle=p(),e.rotate(x),e.fillText(_,0,0),e.rotate(-x),e.translate(-m,-g)}a.hideLines||M(),y()},M=()=>{let e=o.value.getContext("2d");for(let l=0;l<a.count;l++)e.strokeStyle=p(),e.beginPath(),e.moveTo(Math.random()*s,Math.random()*r),e.lineTo(Math.random()*s,Math.random()*r),e.stroke()},y=()=>{i("getCode",n.value)};t.watchEffect(()=>{n.value&&n.value===a.value?i("isValid",!0):i("isValid",!1)});const p=()=>{let e=Math.floor(Math.random()*256),l=Math.floor(Math.random()*256),d=Math.floor(Math.random()*256);return"rgb("+e+","+l+","+d+")"},v=()=>{o.value.getContext("2d").clearRect(0,0,s,r),n.value="",u()};C({resetCaptcha:v});const w=()=>t.h("div",{class:"vue_client_recaptcha"},[t.h(a.hideRefreshIcon?"":"div",{class:"vue_client_recaptcha_icon",onClick:()=>v()},[t.h(f.icon?f.icon:"svg",{class:"vue_client_recaptcha_icon_svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t.h("path",{d:"M2 12a9 9 0 0 0 9 9c2.39 0 4.68-.94 6.4-2.6l-1.5-1.5A6.706 6.706 0 0 1 11 19c-6.24 0-9.36-7.54-4.95-11.95C10.46 2.64 18 5.77 18 12h-3l4 4h.1l3.9-4h-3a9 9 0 0 0-18 0Z",fill:"#333333"})])]),t.h("canvas",{id:"captcha_canvas",class:`captcha_canvas ${a.canvasClass}`,ref:o},n.value)]);return(e,l)=>(t.openBlock(),t.createBlock(w))}})});
